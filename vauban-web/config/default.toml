# VAUBAN Web - Default configuration
# This file contains the default values for all environments.
# Environment-specific files (development.toml, production.toml, etc.)
# can override these values.

[server]
host = "0.0.0.0"
port = 8443
# workers = 4  # Optional, left to Tokio by default

# TLS configuration (required - HTTPS only, TLS 1.3)
[server.tls]
cert_path = "certs/server.crt"
key_path = "certs/server.key"
# ca_chain_path = "certs/ca-chain.crt"  # Optional, for intermediate certificates

[database]
url = "postgresql://vauban:vauban@localhost/vauban"
max_connections = 10
min_connections = 2
connect_timeout_secs = 10

[cache]
enabled = false
url = "redis://localhost:6379"
default_ttl_secs = 3600

[jwt]
access_token_lifetime_minutes = 15
refresh_token_lifetime_days = 1
algorithm = "HS256"

[grpc]
rbac_url = "http://localhost:50052"
vault_url = "http://localhost:50053"
auth_url = "http://localhost:50051"
proxy_ssh_url = "http://localhost:50054"
proxy_rdp_url = "http://localhost:50055"
audit_url = "http://localhost:50056"

[grpc.mtls]
enabled = false
# ca_cert = "/path/to/ca.pem"
# client_cert = "/path/to/client.pem"
# client_key = "/path/to/client-key.pem"

[security]
password_min_length = 12
max_failed_login_attempts = 5
session_max_duration_secs = 28800   # 8 hours
session_idle_timeout_secs = 1800    # 30 minutes
rate_limit_per_minute = 100

[logging]
level = "info"
format = "text"

